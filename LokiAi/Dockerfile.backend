FROM node:22-alpine

WORKDIR /app

# Copy package files
COPY package*.json ./

# Install dependencies
RUN npm install

# Copy application files
COPY backend/ ./backend/
COPY routes/ ./routes/

# Create logs directory
RUN mkdir -p /app/logs

# Expose ports (HTTP and Socket.IO)
EXPOSE 5000 5050

# Start the server
CMD ["node", "backend/server.js"]
